<!DOCTYPE html>
<html lang="en">
<head>
    <title>Basic Web Application with GO</title>

    <link href="https://getbootstrap.com/docs/4.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <h1>Books</h1> 
    <form action="/books" method="post" > 
        <div class="form-group">
            <label>Book Title</label>
            <input type="text" name="title" class="form-control"  placeholder="Enter Title">
        </div>
        <div class="form-group">
            <label>Description</label>
            <input type="text" name="description" class="form-control" placeholder="Enter Description">
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>

    <table class="table table-bordered">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Title</th>
                <th scope="col">Description</th> 
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <script>
    booksTable = document.querySelector("table")
    /*
    fetch API to make a GET call to /books
    */
    fetch("/books")
        .then(response => response.json())
        .then(booksList => {
        //Once we fetch the list, we iterate over it 
        no = 0
        booksList.forEach(books => {
            no++
            // Create the table row
            row = document.createElement("tr")
            number_list = document.createElement("td")
            number_list.innerHTML = no
            // Create the table data elements for the title and
            // description columns
            title = document.createElement("td")
            title.innerHTML = books.title
            description = document.createElement("td")
            description.innerHTML = books.description
            // Add the data elements to the row
            row.appendChild(number_list)
            row.appendChild(title)
            row.appendChild(description)
            // Finally, add the row element to the table itself
            booksTable.appendChild(row)
        })
        })
    </script>
</body>
<script src="https://getbootstrap.com/docs/4.0/dist/js/bootstrap.min.js"></script>
</html>